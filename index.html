<!doctype html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>log-shuttle</title>
	<meta name="author" content="Heroku">
	<meta name="description" content="log-shuttle" />
	<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>

</head>

<style>
	body {
		font-family: Helvetica, sans-serif;
		width: 60%;
		margin: auto;
	}
	h1 {
		font-size: 5em;
		font-family: 'Audiowide', cursive;
		margin-bottom: 0px;
	}
	p {
		font-size: 16px;
		line-height: 20px;
	}
	ul {
		width: 65%;
		padding: 0;
		margin: 20px auto 0 auto;
		
	}
	li {
		font-weight: bold;
		padding: 0 2% 0 8%;
	}
	a {
		color:grey;
	}
</style>

<body>
	<h1>log shuttle</h1>
	<h2>Synopsis</h2>
  <p>Log-shuttle is an open source UNIX program that delivers <a href="http://en.wikipedia.org/wiki/Line_feed">line feed</a> seperated ("\n") messages from applications and daemons to log routers and processors via HTTPs.</p>
	<p>One of the motivations behind log-shuttle is to provide a simpler form of encrypted &amp; authenticated log delivery. Using HTTPs &amp; Basic Authentication is simpler than the techniques described in RFC5425. TLS transport mapping for Syslog requires that you maintain both client &amp; server certificates for authentication. In multi-tenant environments, the maintenance of certificate management can be quite burdensome.</p>
  <p>log-shuttle can send logs to <a href="https://github.com/heroku/logplex">logplex</a> and/or <a href="https://github.com/heroku/log-iss">log-iss</a>.</p>

	<h2>Quick Start</h2>
  <h3>From Source</h3>
  <p>Install a current version of <a href="http://golang.org/doc/install">Go</a>.</p>
    <pre><code>
go get github.com/tools/godep
go get github.com/heroku/log-shuttle
cd $GOPATH/src/github.com/heroku/log-shuttle
godep go install ./...
echo 'hello world' | $GOPATH/bin/log-shuttle -logs-url="https://east.logplex.io/logs"
    </code></pre>

  <h3>Linux Binary</h3>
  <pre><code>
curl -O https://log-shuttle-build.herokuapp.com/bin/log-shuttle
echo 'hello world' | ./log-shuttle -logs-url="https://east.logplex.io/logs"
  </code></pre>

  <h3>Linux Package</h3>
  <pre><code>
curl -O https://log-shuttle-build.herokuapp.com/log-shuttle_0.9.3_amd64.deb
dpkg -i log-shuttle_0.9.3_amd64.deb
echo 'hello world' | log-shuttle -logs-url="https://east.logplex.io/logs"
  </code></pre>

	<h2>Syslog-ng Integration</h2>
	<em>/etc/syslog-ng.conf</em>
	<pre><code>
source s_all {
	internal();
	unix-dgram("/dev/log");
	file("/proc/kmsg" program_override("kernel: "));
};
destination log_shuttle {
  program("/usr/bin/log-shuttle -skip-headers" flags(no_multi_line, syslog-protocol));
};

log {
	source(s_all);
  destination(log_shuttle);
};
	</code></pre>

	<h2>Tail Files</h2>
	<pre><code>
$ tail -qF -n 0 /var/log/* | ./log-shuttle
	</pre></code>

	<h2>Heroku Logplex</h2>
	<p>Checkout Heroku's <a href="https://devcenter.heroku.com/articles/add-on-provider-log-integration">Dev Center Article</a> for instructions on how to acquire an app's logplex token. Once you have the token, run the following command:</p>
	<pre><code>
$ ./log-shuttle -logplex-token="t.abc123" \
	-logs-url="https://east.logplex.io/logs" \
	-workers=5 \
	-front-buff=500 \
	-batch-size=300
	</pre></code>


	
	<h2>Contact</h2>
	<p><a href="https://github.com/heroku/log-shuttle">Github</a></p>
</body>
</html>

<!doctype html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>log-shuttle</title>
	<meta name="author" content="Heroku">
	<meta name="description" content="log-shuttle" />
	<link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>

</head>

<style>
	body {
		font-family: Helvetica, sans-serif;
		width: 50%;
		margin: auto;
	}
	h1 {
		font-size: 5em;
		font-family: 'Audiowide', cursive;
		margin-bottom: 0px;
	}
	p {
		font-size: 16px;
		line-height: 20px;
	}
	ul {
		width: 65%;
		padding: 0;
		margin: 20px auto 0 auto;
		
	}
	li {
		font-weight: bold;
		display: inline;
		padding: 0 2% 0 8%;
	}
	a {
		color:grey;
	}
</style>

<body>
	<h1>log shuttle</h1>
	<h2>Synopsis</h2>
	<p>Log-shuttle is an open source UNIX program that delivers messages from applications and daemons to log routers and processors via HTTPs.</p>
	<p>One of the motivations behind log-shuttle is to provide a simpler form of encrypted & authenticated log delivery. Using HTTPs & Basic Authentication is simpler than the techniques described in RFC5425. TLS transport mapping for Syslog requires that you maintain both client & server certificates for authentication. In multi-tenant environments, the maintenance of certificate management can be quite burdensome.</p>
	<p>When using log-shuttle with <a href="https://devcenter.heroku.com/articles/logplex">logplex</a> it is recomended that you spawn 1 log-shuttle per logplex token. This will isolate data between customers and ensure a good QoS. It is also recomeded that log-shuttle not buffer incomming data so as not to slow down the sending process. This is how log-shuttle works by default, and while not advised, incoming data can be buffered using the <code>-front-buff</code> flag. Run log-shuttle's help command for more options.</p>
	<h2>Quick Start</h2>
	<pre><code>
$ curl http://log-shuttle.io/v0.2/osx/log-shuttle.tar.gz | tar xvz
$ echo 'hello world' | ./log-shuttle -logs-url="https://east.logplex.io/logs"
	</code></pre>

	<h2>Syslog-ng Integration</h2>
	<em>/etc/syslog-ng.conf</em>
	<pre><code>
source s_all {
	internal();
	unix-dgram("/dev/log");
	file("/proc/kmsg" program_override("kernel: "));
};
destination log_shuttle {
  program("/usr/bin/log-shuttle -skip-headers" flags(no_multi_line, syslog-protocol));
};

log {
	source(s_all); destination(log_shuttle);
};
	</code></pre>

	<h2>Tail Files</h2>
	<pre><code>
$ tail -qF -n 0 /var/log/* | ./log-shuttle
	</pre></code>

	<h2>Heroku Logplex</h2>
	<p>Checkout Heroku's <a href="https://devcenter.heroku.com/articles/add-on-provider-log-integration">Dev Center Article</a> for instructions on how to acquire an app's logplex token. Once you have the token, run the following command:</p>
	<pre><code>
$ ./log-shuttle -logplex-token="t.abc123" \
	-logs-url="https://east.logplex.io/logs" \
	-workers=5 \
	-front-buff=500 \
	-batch-size=300
	</pre></code>


	
	<h2>Contact</h2>
	<p><a href="https://github.com/heroku/log-shuttle">Github</a></p>
</body>
</html>
